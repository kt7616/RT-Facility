* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Meiryo', 'Hiragino Sans', sans-serif; background: #f5f5f5; }
.hidden { display: none !important; }

/* Header */
.header {
  background: #fff; padding: 12px 20px; border-bottom: 1px solid #ddd;
}
.header h1 { font-size: 18px; margin-bottom: 2px; }
.header p  { font-size: 12px; color: #666; }

.container { display: flex; height: calc(100vh - 70px); }

/* Sidebar */
.sidebar {
  width: 300px; min-width: 300px; background: #fff;
  border-right: 1px solid #ddd; overflow-y: auto; padding: 12px;
  font-size: 13px;
}
.sidebar h3 { font-size: 14px; margin-bottom: 4px; }
.sidebar hr { border: none; border-top: 1px solid #eee; margin: 8px 0; }

.pref-section { margin-bottom: 6px; }
.pref-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 4px 0; cursor: pointer; user-select: none;
  font-weight: bold; font-size: 13px;
}
.pref-header:hover { color: #2166ac; }
.pref-header .arrow { font-size: 10px; margin-right: 4px; transition: transform 0.2s; }
.pref-header .arrow.open { transform: rotate(90deg); }
.pref-links { font-size: 11px; }
.pref-links a { color: #2166ac; cursor: pointer; text-decoration: none; margin-left: 4px; }
.pref-links a:hover { text-decoration: underline; }

.fac-list { display: none; padding-left: 8px; }
.fac-list.open { display: block; }
.fac-list label {
  display: block; padding: 2px 0; cursor: pointer; user-select: none;
}
.fac-list label:hover { background: #f0f7ff; }
.fac-list input { margin-right: 4px; }

.active-count { font-weight: bold; font-size: 13px; margin: 4px 0; }

.toggle-links { font-size: 12px; margin-bottom: 4px; }
.toggle-links a { color: #2166ac; cursor: pointer; text-decoration: none; }
.toggle-links a:hover { text-decoration: underline; }

.credit-box { font-size: 11px; color: #666; line-height: 1.6; }
.credit-box h4 { font-size: 12px; margin-bottom: 2px; color: #333; }
.credit-box ul { padding-left: 16px; margin: 4px 0; }

/* Main */
.main { flex: 1; display: flex; flex-direction: column; }
#map { flex: 1; min-height: 400px; }

.summary-section { background: #fff; padding: 12px 16px; border-top: 1px solid #ddd; }
.summary-section h3 { font-size: 15px; margin-bottom: 8px; }

/* Table */
.summary-table {
  width: 100%; border-collapse: collapse; font-size: 13px;
}
.summary-table th {
  background: #f8f8f8; font-weight: bold; text-align: right;
  padding: 6px 10px; border: 1px solid #ddd;
}
.summary-table th:first-child { text-align: left; }
.summary-table td {
  padding: 5px 10px; border: 1px solid #eee; text-align: right;
}
.summary-table td:first-child { text-align: left; }
.summary-table tr.pct-bar {
  background: linear-gradient(to right, #d6eaf8 var(--bar-w), transparent var(--bar-w));
}
.summary-table tr.pct-bar:hover {
  background: linear-gradient(to right, #c0ddf0 var(--bar-w), #f0f7ff var(--bar-w));
}

.summary-filter { margin-bottom: 8px; font-size: 13px; }
.summary-filter select {
  padding: 3px 6px; font-size: 13px; border: 1px solid #ccc; border-radius: 3px;
}

/* Loading indicator */
.loading-overlay {
  position: absolute; top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(255,255,255,0.7); display: flex;
  align-items: center; justify-content: center;
  z-index: 500; font-size: 14px; color: #666;
}
.loading-overlay.hidden { display: none; }

/* Disclaimer modal */
.modal-overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(255,255,255,0.85); z-index: 10000;
  display: flex; align-items: center; justify-content: center;
}
.modal-overlay.hidden { display: none; }
.modal-box {
  background: #fff; border: 1px solid #ccc; border-radius: 8px;
  box-shadow: 0 4px 24px rgba(0,0,0,0.15);
  max-width: 680px; width: 90%; max-height: 85vh; overflow-y: auto;
  padding: 28px 32px;
}
.modal-box h2 {
  font-size: 17px; margin-bottom: 16px; padding-bottom: 8px;
  border-bottom: 2px solid #2166ac; color: #2166ac;
}
.modal-box h3 { font-size: 13px; margin: 14px 0 4px; color: #333; }
.modal-box p, .modal-box li {
  font-size: 12.5px; line-height: 1.7; color: #444;
}
.modal-box ul { padding-left: 18px; margin: 4px 0; }
.modal-box a { color: #2166ac; }
.modal-section { margin-bottom: 12px; }
.modal-agree {
  margin-top: 18px; padding-top: 14px; border-top: 1px solid #eee;
  text-align: center;
}
.modal-agree label {
  font-size: 13px; cursor: pointer; user-select: none;
  display: inline-block; margin-bottom: 10px;
}
.modal-agree input { margin-right: 6px; }
.modal-agree button {
  display: block; margin: 0 auto;
  background: #2166ac; color: #fff; border: none; border-radius: 4px;
  padding: 10px 40px; font-size: 14px; cursor: pointer;
  opacity: 0.4; pointer-events: none; transition: opacity 0.2s;
}
.modal-agree button.enabled {
  opacity: 1; pointer-events: auto;
}
.modal-agree button.enabled:hover { background: #1a4f8a; }
